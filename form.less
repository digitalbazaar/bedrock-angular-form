/*
 * Bedrock form style
 *
 * Copyright (c) 2012-2015 Digital Bazaar, Inc. All rights reserved.
 */
@import "../bedrock-angular/less/app.less";
@import (less) "../angular-ui-select/dist/select.css";

/* Forms */
.form-horizontal .radio-inline,
.form-horizontal .checkbox-inline {
  vertical-align: baseline;
}
.form-group-inline {
  // padding of grid classes for small screens since columns stack
  &[class*="col-"] {
    padding-left: 15px;
    padding-right: 15px;
  }

  @media (min-width: @screen-sm) {
    // Undo padding of grid classes for x-small screens
    &[class*="col-xs"] {
      padding-left: 0;
      padding-right: 0;
    }
  }
  @media (min-width: @screen-sm) {
    // Undo padding of grid classes for small screens
    &[class*="col-sm"] {
      padding-left: 0;
      padding-right: 0;
    }
  }
  @media (min-width: @screen-md) {
    // Undo padding of grid classes for medium screens
    &[class*="col-md"] {
      padding-left: 0;
      padding-right: 0;
    }
  }
  @media (min-width: @screen-lg) {
    // Undo padding of grid classes for large screens
    &[class*="col-lg"] {
      padding-left: 0;
      padding-right: 0;
    }
  }
}
br-form-group > .section h4.headline {
  margin-top: 0;
}

/* Help */
.form-horizontal .help-block {
  margin-top: 10px;
}

/* Help Toggle */
.br-help-toggle > .btn:focus {
  outline: 0;
}
.input-group textarea + .input-group-btn.br-help-toggle {
  vertical-align: top;
}
.input-group textarea + .input-group-btn.br-help-toggle > .btn {
  .border-left-radius(0);
  .border-right-radius(@input-border-radius);
}
/* Correct border-radius for form-controls with help toggles, etc. */
.input-group .form-control,
.input-group .ui-select-bootstrap,
.input-group .br-select {
  // replace original setting that removed radius for non-first/last child
  // with only removing it if the form control is not a 'br-help' control
  &:not(:first-child):not(:last-child),
  &:not(:first-child):not(:last-child) .ui-select-match {
    border-radius: @input-border-radius;
  }
  &:not(.br-help):not(:first-child):not(:last-child),
  &:not(.br-help):not(:first-child):not(:last-child) .ui-select-match {
    border-radius: 0;
  }

  // turn on border-left-radius for first child
  &:first-child, &:first-child .ui-select-match {
    .border-left-radius(@input-border-radius);
  }

  // turn on border-right-radius for last child
  &:last-child, &:last-child .ui-select-match {
    .border-right-radius(@input-border-radius);
  }

  // if form control/ui-select has an appended help toggle
  &:not(.br-help-off).br-help {
    // if its not the first child, remove left border radius
    &:not(:first-child) {
      &, & .ui-select-match {
        .border-left-radius(0);
      }
    }
    // always keep the right border radius
    &, & .ui-select-match {
      .border-right-radius(@input-border-radius);
    }
    // no border radius when br-help-toggle is shown/animating
    &:hover, &:focus, &.br-show, &.br-help-focus, &.br-help-mouseover {
      &, & .ui-select-match {
        .border-right-radius(0);
      }
    }
  }
}
.input-group textarea.form-control:not(.br-help-off).br-help {
  // restore bottom right border radius
  &:hover, &:focus, &.br-show, &.br-help-focus, &.br-help-mouseover {
    border-bottom-right-radius: @input-border-radius;
  }
}

/* Input Groups */
.input-group .form-control,
.input-group .ui-select-bootstrap,
.input-group br-select {
  // fix inline padding
  &:not(:first-child):not(:last-child) .input-group-inline {
    padding-left: floor((@grid-gutter-width / 8));
    padding-right: floor((@grid-gutter-width / 8));
  }

  &:first-child:not(:last-child) .input-group-inline {
    padding-left: floor((@grid-gutter-width / 2));
    padding-right: floor((@grid-gutter-width / 8));
  }

  &:last-child:not(:first-child) .input-group-inline {
    padding-left: floor((@grid-gutter-width / 8));
    padding-right: floor((@grid-gutter-width / 2));
  }
}
.input-group {
  // Redo padding of grid classes for small screens since columns stack
  &[class*="col-"] {
    padding-left: 15px;
    padding-right: 15px;
  }

  @media (min-width: @screen-sm) {
    // Undo padding of grid classes for x-small screens
    &[class*="col-xs"] {
      padding-left: 0;
      padding-right: 0;
    }
  }
  @media (min-width: @screen-sm) {
    // Undo padding of grid classes for small screens
    &[class*="col-sm"] {
      padding-left: 0;
      padding-right: 0;
    }
  }
  @media (min-width: @screen-md) {
    // Undo padding of grid classes for medium screens
    &[class*="col-md"] {
      padding-left: 0;
      padding-right: 0;
    }
  }
  @media (min-width: @screen-lg) {
    // Undo padding of grid classes for large screens
    &[class*="col-lg"] {
      padding-left: 0;
      padding-right: 0;
    }
  }
}

/* Select */
.ui-select-match,
.ui-select-match:hover {
  background-color: @input-bg;
  background-image: none;
  color: @input-color;
  border: 1px solid @input-border;
  .box-shadow(inset 0 1px 1px rgba(0,0,0,.075));
  outline: 0;
  // caret placed 15px from the right, add its width + left padding
  padding-right: (15 + @caret-width-base + @padding-base-horizontal);
}
.ui-select-match.btn-default-focus {
  @color-rgba: rgba(red(@input-border-focus), green(@input-border-focus), blue(@input-border-focus), .6);
  border: 1px solid @input-border-focus !important;
  outline: 0;
  .box-shadow(~"inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px @{color-rgba}");
  .transition(~"border-color ease-in-out .15s, box-shadow ease-in-out .15s");
}
.ui-select-choices.dropdown-menu {
  margin-top: (@input-height-base + 2);
}
.form-inline .ui-select-choices.dropdown-menu {
  margin-top: 2px;
}
.form-inline br-select {
  display: inline-block;
}
